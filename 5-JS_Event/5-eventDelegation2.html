<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Interactive Web</title>
    <link rel="stylesheet" href="styles/reset.css" />
    <style>
      body {
        height: 90vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      @keyframes pointer-ani {
        0% {
          transfrom: scale(0);
        }
        50% {
          transform: scale(1);
        }
        100% {
          transform: scale(1.5);
          opacity: 0;
        }
      }
      .pointer {
        position: absolute;
        left: 0;
        top: 0;
        width: 60px;
        height: 60px;
        margin: -30px 0 0 -30px;
        border-radius: 50%;
        background: url("../images/ilbuni2.png") no-repeat 0 0 / cover;
        transform: scale(0);
        animation: pointer-ani 0.5s linear;
      }
      .menu {
        display: flex;
        width: 70vw;
        height: 20vh;
        justify-content: space-evenly;
        align-items: center;
        background: lightgray;
        border-radius: 10px;
      }
      .menu-btn {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 150px;
        height: 80px;
        border: 5px solid white;
        border-radius: 20px;
        outline: 0;
        font: 900 1.2rem NotoSans;
        background: linear-gradient(0deg, rgba(233, 210, 0, 1) 0%, rgba(255, 240, 0, 1) 24%, rgba(255, 240, 0, 1) 70%, rgba(255, 255, 255, 1) 100%);
        cursor: pointer;
      }
      .icon {
        width: 60px;
        /* CSSë¡œ íŠ¹ì •ì„ íƒì ìš”ì†Œì— ì´ë²¤íŠ¸ ë¬´ë ¥í™”, ê° ì•„ì´í…œë§ˆë‹¤ í•´ì¤˜ì•¼í•¨ */
        /* pointer-events: none; */
      }
      .btn-label {
        text-shadow: rgba(255, 255, 255, 1) 0 1px 0;
        /* CSSë¡œ íŠ¹ì •ì„ íƒì ìš”ì†Œì— ì´ë²¤íŠ¸ ë¬´ë ¥í™”, ê° ì•„ì´í…œë§ˆë‹¤ í•´ì¤˜ì•¼í•¨ */
        /* pointer-events: none; */
      }
    </style>
    <script src="ilbuniPointer.js" defer></script>
    <script>
      window.addEventListener("DOMContentLoaded", () => new IlbuniPointer());
    </script>
  </head>
  <body>
    <div class="menu">
      <button class="menu-btn" data-value="1">
        <img src="./images/ilbuni_1.png" alt="" class="icon" />
        <span class="btn-label">ì¼ë¶„ì´ 1</span>
      </button>
      <button class="menu-btn" data-value="2">
        <img src="./images/ilbuni_2.png" alt="" class="icon" />
        <span class="btn-label">ì¼ë¶„ì´ 2</span>
      </button>
      <button class="menu-btn" data-value="3">
        <img src="./images/ilbuni_3.png" alt="" class="icon" />
        <span class="btn-label">ì¼ë¶„ì´ 3</span>
      </button>
    </div>

    <script>
      /**
       * 1ï¸âƒ£ ì´ë²¤íŠ¸ ìœ„ì„ ë³´ê°•
       * - ë¶€ëª¨ìš”ì†Œì— ë‚´ë¶€ì— ìì‹ìš”ì†Œë“¤ì´ ì¢€ ìˆëŠ” ìƒí™©
       * - ë¶€ëª¨ìš”ì†Œì˜ì—­ì„ í´ë¦­í•˜ëŠ”ë°, ë”ìš± ìì„¸íˆëŠ” ìì‹ìš”ì†Œ ì˜ì—­ì„ ëˆŒë €ì„ë•Œ, ìì‹ìš”ì†Œê°€ ì•„ë‹Œ, ê·¸ëŸ¼ì—ë„ ë¶€ëª¨ìš”ì†Œë¥¼ ì„ íƒí•œ ê²ƒìœ¼ë¡œ ì·¨ê¸‰í•˜ë ¤ë©´
       * - 1. CSS : pointer-events: none;
       * - 2. JS : ë°˜ë³µë¬¸ìœ¼ë¡œ DOM Tree ë¥¼ íƒ€ê³ ê°€ëŠ” ë°©ì‹(ë‹¨, body ì´ìƒê°€ë©´ -> ì—†ëŠ” ê²ƒì„, ì¢…ë£Œ)
       *
       * â“ CSS, JS ë°©ì‹ ì¤‘ì— ë¬´ì—‡ì„ ì¨ì•¼ í•˜ë‚˜ ?
       * - ì–¸ëœ» ë³´ê¸°ì—” CSS ë°©ì‹ì´ ê°„í¸í•´ë³´ì´ë‚˜, CSSë°©ì‹ì€ point-events: none í•œ ìš”ì†Œì— í•˜ìœ„ìš”ì†Œë“¤ë§ˆì € event ì „íŒŒê°€ ì¼ì–´ë‚˜ì§€ ì•Šìœ¼ë¯€ë¡œ
       * - ë§Œì•½ ìì‹ìš”ì†Œ ë‚´ë¶€ì— ë˜ ë‹¤ë¥¸ ìì‹ìš”ì†Œì— event ê°€ ì „íŒŒë˜ì–´ì•¼í•˜ëŠ” ìƒí™©ì´ í•„ìš”í•  ê²½ìš°, ìˆ˜ì •ì´ ì•ˆëŒ
       * - ë°˜ë©´, JS ë°©ì‹ì€ ë‹¨ìˆœíˆ, "ì •ì ìœ¼ë¡œ lock" ì„ ê±°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, í•¨ìˆ˜ ë‚´ì—ì„œ "ì¼ì‹œì ìœ¼ë¡œ ì¡°ê±´ì— ë”°ë¼" lock ì„ ê±°ëŠ” ê±°ì—¬ì„œ CSS ê°™ì€ ë¬¸ì œëŠ” ì—†ë‹¤.
       * - ê° ìƒí™©ì— ë§ê²Œ íŒë‹¨í•´ì„œ ì‚¬ìš©í•´ì•¼í•œë‹¤.
       *
       *
       * ğŸ” ì´ë²¤íŠ¸ ìœ„ì„ ì¥ì 
       * - "ë™ì ìœ¼ë¡œ" script ìƒì—ì„œ ìƒì„±í•˜ì—¬, íŠ¹ì • ë¶€ëª¨ìš”ì†Œ ë‚´ë¶€ì— ë¶™ì—¬ì¤˜ì•¼í•˜ëŠ” ìƒí™©ì—
       * - ê° ì•„ì´í…œë“¤ì—ê²Œ ë™ì¼í•œ event ê°€ ìˆì„ ê²½ìš°, ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜, ìµœìƒìœ„ ë¶€ëª¨ì—ê²Œë§Œ event ë¥¼ ê±¸ì–´ë†“ê³ 
       * - event.target ì„ í†µí•´, ìì‹ìš”ì†Œë“¤ì—ê²Œë„ ë™ì¼í•œ ì´ë²¤íŠ¸ë¦¬ìŠ¤ë„ˆë¥¼ ì‘ë™í•˜ê²Œ í•´ì£¼ë©´, ì–¼ë§ˆë‚˜ ì¢‹ì•„
       * - ì´ê²Œ ì•„ë‹ˆë©´, ê°ê°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ”, element ì— ëŒ€í•´, html ì— ì¶”ê°€í•˜ê¸°ì „ì— ì´ë²¤íŠ¸ë¦¬ìŠ¤í„°ë¥¼ ê°ê° ë‹¬ì•„ì£¼ê³  ì¶”ê°€í•´ì¤˜ì•¼í•´ì„œ ê·€ì°®
       *
       * ğŸ’¡ ì´ë²¤íŠ¸ ìœ„ì„(event delegation) ì— ëŒ€í•´ì„œëŠ” ì‚¬ì‹¤
       * - ì´ë²¤íŠ¸ ë²„ë¸”ë§(bubbling)
       * - ì´ë²ˆíŠ¸ ìº¡ì²˜ë§(capturing)
       * - ì´ë²¤íŠ¸ ìœ„ì„(delegation)
       * - ì´ë²¤íŠ¸ ì „íŒŒ(propagation)
       * ê°™ì€ ì„œë¡œ ì—®ì¸ ê°œë…ë“¤ì´ ìˆëŠ”ë°, ì´ ë¶€ë¶„ì€ ë”°ë¡œ í¬ìŠ¤íŒ…í•  ê²ƒ
       * */

      const menu = document.querySelector(".menu");

      function clickHandler(e) {
        // e.target.getAttribute('data-ì´ë¦„') == e.target.dataset.ì´ë¦„
        // console.log(e.target.dataset.value);

        // ë¶€ëª¨ìš”ì†Œì˜, ì–´ë–¤ Element ì— ì´ë²¤íŠ¸ê°€ ë“¤ì–´ì™”ë˜, ì¼ë‹¨ ê°€ì ¸ì˜¨ë‹¤.
        let elem = e.target;
        // ìš°ë¦¬ê°€ ì°¾ëŠ” class ì´ë¦„ìœ¼ë¡œ í•˜ëŠ” ìš”ì†Œì¼ë•Œê¹Œì§€, ë¶€ëª¨ë¥¼ íƒ€ê³  ì˜¬ë¼ê°„ë‹¤.
        while (!elem.classList.contains("menu-btn")) {
          elem = elem.parentNode;

          // ë‹¨, ë§Œì•½ ì‹œì‘ì´, ì°¾ëŠ” íƒ€ê²Ÿ ë…¸ë“œë³´ë‹¤ ìƒìœ„ì— ìˆëŠ” ìš”ì†Œë¶€í„° ì‹œì‘ì´ë©´, ì ˆëŒ€ ëª»ì°¾ìŒ, ê·¸ëŸ¼ ê²°êµ¬ BODY ê°ì²´ê¹Œì§€ ê°ˆí…ë° ê·¸ëŸ¬ë©´, í•¨ìˆ˜ì¢…ë£Œ
          if (elem.nodeName === "BODY") {
            elem = null;
            return;
          }
        }
        // ì°¾ì•˜ìœ¼ë©´, ê·¸ ë°•ìŠ¤ì—ëŠ” dataset ì†ì„± ìˆì„í…Œë‹ˆ, ê·¸ ê°’ ì¶œë ¥
        console.log(elem.dataset.value);
      }

      menu.addEventListener("click", clickHandler);
    </script>
  </body>
</html>
